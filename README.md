# CloudFrontSignedURL

[![Version](https://img.shields.io/cocoapods/v/CloudFrontSignedURL.svg?style=flat)](https://cocoapods.org/pods/CloudFrontSignedURL)
[![License](https://img.shields.io/cocoapods/l/CloudFrontSignedURL.svg?style=flat)](https://cocoapods.org/pods/CloudFrontSignedURL)
[![Platform](https://img.shields.io/cocoapods/p/CloudFrontSignedURL.svg?style=flat)](https://cocoapods.org/pods/CloudFrontSignedURL)

## Overview

Helper to generate [AWS CloudFront Signed URL](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-signed-urls.html).

## "Road" to version 1.0

- Support custom policies.
- Support signed cookies/headers.

## Installation

CloudFrontSignedURL is available through [CocoaPods](https://cocoapods.org). To install
it, simply add the following line to your Podfile:

```ruby
pod 'CloudFrontSignedURL'
```

## How To: Sign URL with Canned Policy

```objc
// 1. Have URL to a given resource
NSURL *testURL = [NSURL URLWithString:@"https://moonhappy.io/index.html"];

// 2. Signed URL Canned policy requires an exipiration timestamp. Eg: 600 seconds from now.
NSDate *expire = [NSDate dateWithTimeInterval:600.0 sinceDate:[NSDate date]];

// 3. Load the CloudFront private key to sign with (generated by AWS). Eg: private.der in main bundle.
NSString *derKeyPath = [[NSBundle mainBundle] pathForResource:@"private" ofType:@"der"];
NSData *derKey = [NSData dataWithContentsOfFile:derKeyPath];

// 4. Have the CloudFront generated key id at the ready.
NSString *keyID = @"AAAAAAAA";

// 5. Generate the signed url using CloudFrontSignedURL NSURL extension/category.
NSURL *signedURL = [testURL cloudFrontSignedCannedPolicyURLForAccessKey:keyID
                                                             privateKey:derKey
                                                             expiration:expire];

// 6. Test the signed url by opening the link.                                                         
[[UIApplication sharedApplication] openURL:signedURL options:@{} completionHandler:nil];
```

## Author

Moonhappy - 2020

## License

CloudFrontSignedURL is available under the MIT license. See the LICENSE file for more info.
